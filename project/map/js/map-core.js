export function getChartOption(e,o,t,i={}){const r=Math.max(...t.map(e=>e.value),0),n=buildRegions(i),a=buildTooltipFormatter(i),l=buildSeries(o,t,i);return console.log("cityNames:",i.cityNames,"activeProvinceName:",i.activeProvinceName),{tooltip:{trigger:"item",borderColor:"#171a24",borderWidth:1,backgroundColor:"rgba(255, 255, 255, 0.9)",formatter:a},visualMap:{show:!0,min:0,max:r||1,zlevel:1,inRange:{color:["#ecf0f1e6","#E4D9F0e6","#DBC2EFe6","#D3ABEDe6","#CA94ECe6","#C27DEBe6"]},left:"5%",bottom:"5%",calculable:!0},geo:{map:e,roam:!0,center:i.center||[104.31,35.58],zoom:i.zoom||1.6,label:{show:!0,fontSize:10,fontFamily:"Times New Roman, FZS, CaviarDreams, Pingfang, Pingfangjian",formatter:function(e){return e.name.replace(/çœ|å¸‚|ç›Ÿ|åœ°åŒº|è‡ªæ²»åŒº|ç‰¹åˆ«è¡Œæ”¿åŒº|å£®æ—è‡ªæ²»åŒº|å›æ—è‡ªæ²»åŒº|ç»´å¾å°”è‡ªæ²»åŒº|è—æ—è‡ªæ²»å·|å›æ—è‡ªæ²»å·|æœé²œæ—è‡ªæ²»å·|è’™å¤è‡ªæ²»å·|å“ˆè¨å…‹è‡ªæ²»å·/g,"")}},itemStyle:{areaColor:"#ecf0f1e6",borderColor:"#666",borderWidth:1.5},regions:n,emphasis:{itemStyle:{areaColor:"#f1b03fe6"}}},series:l}}function buildRegions(e){const o=[];if(e.cityNames&&e.cityNames.forEach(e=>{o.push({name:e,itemStyle:{borderWidth:1,borderColor:"#bebebe"}})}),e.activeProvinceName){const t="glow"===e.activeProvinceBorderStyle;o.push({name:e.activeProvinceName+"_BORDERS",silent:!0,label:{show:!1},itemStyle:{areaColor:"rgba(0,0,0,0)",borderColor:t?"#FFD700":"#444",borderWidth:t?3:2.5,shadowColor:t?"rgba(255, 215, 0, 0.8)":void 0,shadowBlur:t?20:void 0,shadowOffsetX:t?0:void 0,shadowOffsetY:t?0:void 0,zlevel:0}})}return o}function buildTooltipFormatter(e){const o=e.mapTooltipMode||"records",t=e.recordTooltipStyle||"compact",i=e.recordTooltipScrollable||!1,r=e.recordTooltipScrollHeight||200;return function(n){let a="";if("effectScatter"===n.seriesType)a=`<div style="font-size: 16px; font-weight: bold; color: #171a24;">ğŸ“ ${n.name}</div>`,n.data&&n.data.description&&(a+=`<div style="margin-top: 5px; color: #666; max-width: 200px; white-space: normal;">${n.data.description}</div>`);else if("map"===n.seriesType){if("count"===o){const o=n.value||0;return a=`<div style="font-size: 16px; font-weight: bold;">${n.name}</div>`,o>0?e.isProvinceLevel?a+=`<div style="margin-top: 5px; color: #171a24;">å…± ${o} æ¡è®°å½•</div>`:a+=`<div style="margin-top: 5px; color: #171a24;">å…±èµ°è¿‡ ${o} åº§åŸ</div>`:a+='<div style="margin-top: 5px; color: #999;">æš‚æ— è¶³è¿¹</div>',a}return buildRecordTooltip(n,t,i,r)}return a}}function buildRecordTooltip(e,o,t,i){const r=e.data,n=e.name,a=r?.records||[];let l=`\n        <div style="line-height: 1.2;">\n            <div style="\n                font-size: 13px; \n                font-weight: bold; \n                margin-bottom: 5px; \n                color: #333; \n                border-bottom: 1px solid #eee; \n                padding-bottom: 3px;\n            ">\n            ${n} (${a.length} æ¡è®°å½•)\n        </div>\n    `;return a.length>0?(t&&(l+=`<div style="max-height: ${i}px; overflow-y: auto; padding-right: 5px;">`),"detailed"===o?a.forEach(e=>{l+=`\n                    <div style="margin-bottom: 10px; font-size: 13px;">\n                        <div style="color: #666; font-weight: bold;">\n                            <span style="color: #333;">ğŸ“… ${e.date||"æœªçŸ¥æ—¥æœŸ"}</span> \n                            <span style="margin-left: 8px; color: #171a24;">ğŸ“ ${e.city}</span>\n                        </div>\n                        <div style="color: #444; margin-top: 2px; line-height: 1.4; background: #f9f9f9; padding: 4px; border-radius: 4px;">\n                            ${e.description||"æ— è¯¦ç»†è¯´æ˜"}\n                        </div>\n                    </div>`}):a.forEach((e,o)=>{l+=`\n                    <div style="margin-bottom: 6px; ${0!==o?"border-top: 1px dashed #f0f0f0; pt: 3px;":""}">\n                        <div style="font-size: 11px; color: #888;">\n                            <span>${e.date||""}</span>\n                            <span style="margin-left: 5px; color: #555;">${e.city}</span>\n                        </div>\n                        <div style="font-size: 11px; color: #222; margin-top: 1px; white-space: normal; max-width: 180px;">\n                            <span>${e.description||""}</span>\n                        </div>\n                    </div>`}),t&&(l+="</div>")):l+='<div style="font-size: 11px; color: #999;">æš‚æ— è¶³è¿¹</div>',l+="</div>",l}function buildSeries(e,o,t){const i=[];return!0===t.showPointSeries&&i.push({name:"è¶³è¿¹ç‚¹",type:"effectScatter",coordinateSystem:"geo",data:e,symbolSize:t.pointSymbolSize||5,itemStyle:t.pointItemStyle||{color:"#fff",shadowBlur:10},zlevel:3}),i.push({name:"çƒ­åŠ›å›¾",type:"map",geoIndex:0,data:o,itemStyle:{borderWidth:0},zlevel:2}),i}